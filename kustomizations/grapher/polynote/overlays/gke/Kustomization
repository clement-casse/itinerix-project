apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: grapher

bases:
- ../../base

configMapGenerator:
- name: polynote-config-file
  behavior: replace
  files:
  - polynote/config.yaml
- name: polynote-reference-notebooks
  files:
  - polynote/notebooks/JaegerTracesIngest.ipynb
  - polynote/notebooks/GremlinServerBoltConnection.ipynb
  - polynote/notebooks/GremlinServerConnection.ipynb

secretGenerator:
- name: htpasswd-polynote
  behavior: replace
  files:
  - polynote/users

patchesStrategicMerge:
- polynote-add-ref-notebooks.yaml
- tune-ingressroute.yaml
- polynote-persist-notebooks.yaml
