apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

generatorOptions:
  # Disable the suffix hash because secrets are used by CRD whose 
  # fields cannot be generated by Kustomize (middleware.traefik.containo.us/v1alpha1)
  disableNameSuffixHash: true

secretGenerator:
- name: htpasswd-polynote
  files:
  - secrets/users

configMapGenerator:
- name: polynote-config-file
  files:
  - configs/config.yaml

resources:
- deployment.yaml
- ingress-route.yaml
- middlewares.yaml
- service.yaml
